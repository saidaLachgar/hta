"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[606],{9167:(j,P,t)=>{t.d(P,{p:()=>m});var e=t(3668),E=t(7317),f=t(7686);let m=(()=>{class d{constructor(p,r){this.router=p,this.authService=r}canActivate(p,r){return!!this.authService.isAuthorized(p.data.access)||(alert("acc\xe8s refus\xe9"),this.router.navigate(["/dashboard"]),!1)}}return d.\u0275fac=function(p){return new(p||d)(e.\u0275\u0275inject(E.F0),e.\u0275\u0275inject(f.$))},d.\u0275prov=e.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},6761:(j,P,t)=>{t.d(P,{l:()=>D});var e=t(1824),E=t(3405),f=t(3596),m=t(2411),d=t(6813),u=t(5686),p=t(5389),r=t(8735),l=t(1366),_=t(9204),i=t(8053),h=t(2047),c=t(8260),g=t(3668),O=t(5633),B=t(5069),U=t(8274),S=t(4522);let D=(()=>{class M extends e.c8{constructor(s,a,n,v,I){super("departments",s),this.serviceElementsFactory=s,this.confirmDialogService=a,this.MediasService=n,this.toast=v,this.http=I,this.pageSize=c.N.pageSize,this.server=c.N.serverURL,this.teamLoading=!1,this.teamInput$=new E.xQ,this.submitted=!1,this.isLoading=!1,this.FileRemoved=!1,this.page=1}findAll(){this.findByCriteria({page:1})}loadTeams(s=[]){this.teams$=(0,f.z)((0,m.of)(s),this.teamInput$.pipe((0,u.b)(500),(0,p.x)(),(0,r.h)(a=>null!=a),(0,l.b)(()=>this.teamLoading=!0),(0,_.w)(a=>this.http.get(`${this.server}/api/teams?properties[]=id&properties[]=titre&titre=`+a).pipe((0,i.U)(n=>n["hydra:member"]),(0,h.K)(()=>(0,m.of)([])),(0,l.b)(()=>this.teamLoading=!1)))))}getPagination(){this.pagination$=(0,m.of)(),this.pagination$=this.selectors$.entityActions$.pipe((0,i.U)(s=>s.payload.pagination))}deleteItem(s,a){this.confirmDialogService.setConfirmation("Vous \xeates s\xfbr de vouloir supprimer?",()=>{this.delete(s).pipe(this.toast.observe({loading:"Suppression...",success:()=>(a.closest("tr").remove(),"D\xe9part supprim\xe9 avec succ\xe8s"),error:"un probl\xe8me est survenu, veuillez r\xe9essayer"})).subscribe()})}onSearch(){this.page=1,this.lastSearchedParams=this.departmentForm.value,this.findByCriteria(Object.assign({page:1},this.lastSearchedParams))}onCreate(){let s=this.departmentForm;if(this.submitted=!0,s.invalid)return;this.submitted=!1,this.isLoading=!0;let n,a=this.toast,v=this,I=Object.entries(s.value);const y=Object.fromEntries(I.filter(([C,L])=>""!==L));n=this.selectedFile?this.MediasService.Upload(this.selectedFile[0]).pipe((0,_.w)(C=>(y.visuel=C["@id"],this.add(y)))):this.add(y),n.subscribe({error:()=>{v.isLoading=!1,a.error("un probl\xe8me est survenu, veuillez r\xe9essayer")},complete(){s.reset(),v.isLoading=!1,v.selectedFile=null,a.success("D\xe9part ajout\xe9 avec succ\xe8s")}})}onUpdate(s){let a=this.departmentForm;if(this.submitted=!0,a.invalid)return;this.submitted=!1,this.isLoading=!0;let n=this,v=this.toast,I=[],y=Object.entries(a.value);const C=Object.fromEntries(y.filter(([L,A])=>""!==A));C.id=s,!1!==this.FileRemoved&&(C.visuel=null),this.selectedFile?(this.isLoading=!0,I.push(this.MediasService.Upload(this.selectedFile[0]).pipe((0,_.w)(L=>(this.uploadedFile={id:L.id,url:L.contentUrl},this.selectedFile=null,this.FileRemoved=!1,C.visuel=L["@id"],this.update(C)))))):I.push(this.update(C)),(0,d.D)(I).subscribe({error:()=>{n.isLoading=!1,v.error("un probl\xe8me est survenu, veuillez r\xe9essayer")},complete(){!1!==n.FileRemoved?n.MediasService.delete(n.FileRemoved).subscribe(()=>{n.isLoading=!1,v.success("D\xe9part a \xe9t\xe9 mis \xe0 jour avec succ\xe8s")}):(n.isLoading=!1,v.success("D\xe9part a \xe9t\xe9 mis \xe0 jour avec succ\xe8s"))}})}get titre(){return this.departmentForm.get("titre")}get visuel(){return this.departmentForm.get("visuel")}get team(){return this.departmentForm.get("team")}findByCriteria(s){this.departments$=(0,m.of)([]);let a=Object.keys(s).filter(n=>""!=s[n]&&null!=s[n]).reduce((n,v)=>Object.assign(Object.assign({},n),{[v]:s[v]}),{});this.departments$=this.getWithQuery(a),this.getPagination()}onPaginate(s){this.findByCriteria(Object.assign({page:s},this.lastSearchedParams))}}return M.\u0275fac=function(s){return new(s||M)(g.\u0275\u0275inject(e.yV),g.\u0275\u0275inject(O.D),g.\u0275\u0275inject(B.q),g.\u0275\u0275inject(U.jE),g.\u0275\u0275inject(S.eN))},M.\u0275prov=g.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac,providedIn:"root"}),M})()},4878:(j,P,t)=>{t.d(P,{s:()=>r});var e=t(1824),E=t(2411),f=t(8053),m=t(8260),d=t(3668),u=t(5633),p=t(8274);let r=(()=>{class l extends e.c8{constructor(i,h,c){super("goal_groups",i),this.serviceElementsFactory=i,this.confirmDialogService=h,this.toast=c,this.pageSize=m.N.pageSize,this.persistence=!1,this.submitted=!1,this.page=1}findAll(){this.findByCriteria({page:1})}getPagination(){this.pagination$=(0,E.of)(),this.pagination$=this.selectors$.entityActions$.pipe((0,f.U)(i=>i.payload.pagination))}deleteItem(i,h){this.confirmDialogService.setConfirmation("Vous \xeates s\xfbr de vouloir supprimer?",()=>{this.delete(i).pipe(this.toast.observe({loading:"Suppression...",success:()=>(h.closest("tr").remove(),"Groupe supprim\xe9 avec succ\xe8s"),error:"un probl\xe8me est survenu, veuillez r\xe9essayer"})).subscribe()})}onSearch(){this.page=1,this.lastSearchedParams=this.goalGroupForm.value,this.findByCriteria(Object.assign({page:1},this.lastSearchedParams))}onSave(){let i=this.goalGroupForm;if(this.submitted=!0,i.invalid)return;let g,h=this.toast,c=this;if(!1===this.persistence)g=this.add(i.value);else{let O=Object.assign({},i.value);O.id=this.persistence,g=this.update(O)}g.subscribe({error:()=>h.error("un probl\xe8me est survenu, veuillez r\xe9essayer"),complete(){i.reset(),c.findByCriteria(Object.assign({page:1},c.lastSearchedParams)),h.success(`Groupe a \xe9t\xe9 ${!1===c.persistence?"ajout\xe9":"mis \xe0 jour"} avec succ\xe8s`),c.persistence=!1,c.submitted=!1}})}onUpdate(i,h,c){this.persistence=i,this.goalGroupForm.patchValue({name:h,displayInForms:c})}get name(){return this.goalGroupForm.get("name")}findByCriteria(i){this.goalGroups$=(0,E.of)([]);let h=Object.keys(i).filter(c=>""!=i[c]&&null!=i[c]).reduce((c,g)=>Object.assign(Object.assign({},c),{[g]:i[g]}),{});this.goalGroups$=this.getWithQuery(h),this.getPagination()}onPaginate(i){this.findByCriteria(Object.assign({page:i},this.lastSearchedParams))}}return l.\u0275fac=function(i){return new(i||l)(d.\u0275\u0275inject(e.yV),d.\u0275\u0275inject(u.D),d.\u0275\u0275inject(p.jE))},l.\u0275prov=d.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},7794:(j,P,t)=>{t.d(P,{K:()=>S});var e=t(1824),E=t(3405),f=t(3596),m=t(2411),d=t(5686),u=t(5389),p=t(8735),r=t(1366),l=t(9204),_=t(2047),i=t(8053),h=t(8260),c=t(3668),g=t(5633),O=t(6761),B=t(4878),U=t(8274);let S=(()=>{class D extends e.c8{constructor(o,s,a,n,v){super("goals",o),this.serviceElementsFactory=o,this.confirmDialogService=s,this.departmentService=a,this.goalGroupService=n,this.toast=v,this.pageSize=h.N.pageSize,this.goalGroupLoading=!1,this.goalGroupInput$=new E.xQ,this.submitted=!1,this.page=1}findAll(){this.findByCriteria({page:1})}loadGoalGroups(o=[]){this.goalGroups$=(0,f.z)((0,m.of)(o),this.goalGroupInput$.pipe((0,d.b)(500),(0,u.x)(),(0,p.h)(s=>null!=s),(0,r.b)(()=>this.goalGroupLoading=!0),(0,l.w)(s=>this.goalGroupService.getWithQuery("name="+s).pipe((0,_.K)(()=>(0,m.of)([])),(0,r.b)(()=>this.goalGroupLoading=!1)))))}getPagination(){this.pagination$=(0,m.of)(),this.pagination$=this.selectors$.entityActions$.pipe((0,i.U)(o=>o.payload.pagination))}deleteItem(o,s){this.confirmDialogService.setConfirmation("Vous \xeates s\xfbr de vouloir supprimer?",()=>{this.delete(o).pipe(this.toast.observe({loading:"Suppression...",success:()=>(s.closest("tr").remove(),"L'\xe9quipe supprim\xe9 avec succ\xe8s"),error:"un probl\xe8me est survenu, veuillez r\xe9essayer"})).subscribe()})}onSearch(){this.page=1,this.lastSearchedParams=this.goalForm.value,this.findByCriteria(Object.assign({page:1},this.lastSearchedParams))}onCreate(){let o=this.goalForm;if(this.submitted=!0,o.invalid)return;this.submitted=!1;let s=this.toast,a=o.value;console.log(a),this.add(a).subscribe({error:()=>s.error("un probl\xe8me est survenu, veuillez r\xe9essayer"),complete(){o.reset(),s.success("L'\xe9quipe ajout\xe9 avec succ\xe8s")}})}onUpdate(o){let s=this.goalForm;if(this.submitted=!0,s.invalid)return;this.submitted=!1;let a=this.toast,n=Object.assign({},s.value);n.id=o,this.update(n).subscribe({error:()=>a.error("un probl\xe8me est survenu, veuillez r\xe9essayer"),complete(){a.success("L'\xe9quipe a \xe9t\xe9 mis \xe0 jour avec succ\xe8s")}})}get name(){return this.goalForm.get("name")}get targetAchievement(){return this.goalForm.get("targetAchievement")}get goalGroup(){return this.goalForm.get("goalGroup")}findByCriteria(o){this.goals$=(0,m.of)([]);let s=Object.keys(o).filter(a=>""!=o[a]&&null!=o[a]).reduce((a,n)=>Object.assign(Object.assign({},a),{[n]:o[n]}),{});this.goals$=this.getWithQuery(s),this.getPagination()}onPaginate(o){this.findByCriteria(Object.assign({page:o},this.lastSearchedParams))}}return D.\u0275fac=function(o){return new(o||D)(c.\u0275\u0275inject(e.yV),c.\u0275\u0275inject(g.D),c.\u0275\u0275inject(O.l),c.\u0275\u0275inject(B.s),c.\u0275\u0275inject(U.jE))},D.\u0275prov=c.\u0275\u0275defineInjectable({token:D,factory:D.\u0275fac,providedIn:"root"}),D})()},5069:(j,P,t)=>{t.d(P,{q:()=>d});var e=t(1824),E=t(8260),f=t(3668),m=t(4522);let d=(()=>{class u extends e.c8{constructor(r,l){super("media_objects",r),this.serviceElementsFactory=r,this.http=l,this.server=E.N.serverURL}Upload(r){let l=`${this.server}/api/media_objects`,_=new FormData;return _.append("file",r,r.name),this.http.post(l,_,{reportProgress:!0,responseType:"json"}).pipe()}}return u.\u0275fac=function(r){return new(r||u)(f.\u0275\u0275inject(e.yV),f.\u0275\u0275inject(m.eN))},u.\u0275prov=f.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},1950:(j,P,t)=>{t.d(P,{V:()=>p});var e=t(3668),E=t(6019);function f(r,l){1&r&&(e.\u0275\u0275elementStart(0,"div",8),e.\u0275\u0275elementStart(1,"span",9),e.\u0275\u0275text(2,"Loading..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}function m(r,l){if(1&r&&(e.\u0275\u0275elementStart(0,"li",12),e.\u0275\u0275elementStart(1,"a",13),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&r){const _=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(_.label)}}function d(r,l){if(1&r&&(e.\u0275\u0275elementStart(0,"li",14),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const _=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",_.label," ")}}function u(r,l){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,m,3,1,"li",10),e.\u0275\u0275template(2,d,2,1,"li",11),e.\u0275\u0275elementContainerEnd()),2&r){const _=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!_.active),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",_.active)}}let p=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(_){return new(_||r)},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-page-title"]],inputs:{breadcrumbItems:"breadcrumbItems",title:"title",Loading:"Loading"},decls:9,vars:3,consts:[[1,"row"],[1,"col-12"],[1,"page-title-box","d-flex","align-items-center","justify-content-between"],[1,"mb-0","font-size-18"],["role","status","class","spinner-grow ms-1 spinner-grow-sm text-primary",4,"ngIf"],[1,"page-title-right","d-none","d-md-block"],[1,"breadcrumb","m-0"],[4,"ngFor","ngForOf"],["role","status",1,"spinner-grow","ms-1","spinner-grow-sm","text-primary"],[1,"sr-only"],["class","breadcrumb-item",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[1,"breadcrumb-item"],["href","javascript: void(0);"],[1,"breadcrumb-item","active"]],template:function(_,i){1&_&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"h4",3),e.\u0275\u0275text(4),e.\u0275\u0275template(5,f,3,0,"div",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"ol",6),e.\u0275\u0275template(8,u,3,2,"ng-container",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&_&&(e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",i.title," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.Loading),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",i.breadcrumbItems))},directives:[E.NgIf,E.NgForOf],encapsulation:2}),r})()}}]);