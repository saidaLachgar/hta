"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[773],{9167:(A,I,a)=>{a.d(I,{p:()=>e});var r=a(3668),S=a(7317),l=a(7686);let e=(()=>{class f{constructor(p,s){this.router=p,this.authService=s}canActivate(p,s){return!!this.authService.isAuthorized(p.data.access)||(alert("acc\xe8s refus\xe9"),this.router.navigate(["/dashboard"]),!1)}}return f.\u0275fac=function(p){return new(p||f)(r.\u0275\u0275inject(S.F0),r.\u0275\u0275inject(l.$))},f.\u0275prov=r.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},6761:(A,I,a)=>{a.d(I,{l:()=>U});var r=a(1824),S=a(3405),l=a(3596),e=a(2411),f=a(6813),g=a(5686),p=a(5389),s=a(8735),h=a(1366),u=a(9204),x=a(8053),B=a(2047),D=a(8260),L=a(3668),j=a(5633),F=a(5069),R=a(8274),O=a(4522);let U=(()=>{class m extends r.c8{constructor(d,c,v,C,y){super("departments",d),this.serviceElementsFactory=d,this.confirmDialogService=c,this.MediasService=v,this.toast=C,this.http=y,this.pageSize=D.N.pageSize,this.server=D.N.serverURL,this.teamLoading=!1,this.teamInput$=new S.xQ,this.submitted=!1,this.isLoading=!1,this.FileRemoved=!1,this.page=1}findAll(){this.findByCriteria({page:1})}loadTeams(d=[]){this.teams$=(0,l.z)((0,e.of)(d),this.teamInput$.pipe((0,g.b)(500),(0,p.x)(),(0,s.h)(c=>null!=c),(0,h.b)(()=>this.teamLoading=!0),(0,u.w)(c=>this.http.get(`${this.server}/api/teams?properties[]=id&properties[]=titre&titre=`+c).pipe((0,x.U)(v=>v["hydra:member"]),(0,B.K)(()=>(0,e.of)([])),(0,h.b)(()=>this.teamLoading=!1)))))}getPagination(){this.pagination$=(0,e.of)(),this.pagination$=this.selectors$.entityActions$.pipe((0,x.U)(d=>d.payload.pagination))}deleteItem(d,c){this.confirmDialogService.setConfirmation("Vous \xeates s\xfbr de vouloir supprimer?",()=>{this.delete(d).pipe(this.toast.observe({loading:"Suppression...",success:()=>(c.closest("tr").remove(),"D\xe9part supprim\xe9 avec succ\xe8s"),error:"un probl\xe8me est survenu, veuillez r\xe9essayer"})).subscribe()})}onSearch(){this.page=1,this.lastSearchedParams=this.departmentForm.value,this.findByCriteria(Object.assign({page:1},this.lastSearchedParams))}onCreate(){let d=this.departmentForm;if(this.submitted=!0,d.invalid)return;this.submitted=!1,this.isLoading=!0;let v,c=this.toast,C=this,y=Object.entries(d.value);const T=Object.fromEntries(y.filter(([P,M])=>""!==M));v=this.selectedFile?this.MediasService.Upload(this.selectedFile[0]).pipe((0,u.w)(P=>(T.visuel=P["@id"],this.add(T)))):this.add(T),v.subscribe({error:()=>{C.isLoading=!1,c.error("un probl\xe8me est survenu, veuillez r\xe9essayer")},complete(){d.reset(),C.isLoading=!1,C.selectedFile=null,c.success("D\xe9part ajout\xe9 avec succ\xe8s")}})}onUpdate(d){let c=this.departmentForm;if(this.submitted=!0,c.invalid)return;this.submitted=!1,this.isLoading=!0;let v=this,C=this.toast,y=[],T=Object.entries(c.value);const P=Object.fromEntries(T.filter(([M,$])=>""!==$));P.id=d,!1!==this.FileRemoved&&(P.visuel=null),this.selectedFile?(this.isLoading=!0,y.push(this.MediasService.Upload(this.selectedFile[0]).pipe((0,u.w)(M=>(this.uploadedFile={id:M.id,url:M.contentUrl},this.selectedFile=null,this.FileRemoved=!1,P.visuel=M["@id"],this.update(P)))))):y.push(this.update(P)),(0,f.D)(y).subscribe({error:()=>{v.isLoading=!1,C.error("un probl\xe8me est survenu, veuillez r\xe9essayer")},complete(){!1!==v.FileRemoved?v.MediasService.delete(v.FileRemoved).subscribe(()=>{v.isLoading=!1,C.success("D\xe9part a \xe9t\xe9 mis \xe0 jour avec succ\xe8s")}):(v.isLoading=!1,C.success("D\xe9part a \xe9t\xe9 mis \xe0 jour avec succ\xe8s"))}})}get titre(){return this.departmentForm.get("titre")}get visuel(){return this.departmentForm.get("visuel")}get team(){return this.departmentForm.get("team")}findByCriteria(d){this.departments$=(0,e.of)([]);let c=Object.keys(d).filter(v=>""!=d[v]&&null!=d[v]).reduce((v,C)=>Object.assign(Object.assign({},v),{[C]:d[C]}),{});this.departments$=this.getWithQuery(c),this.getPagination()}onPaginate(d){this.findByCriteria(Object.assign({page:d},this.lastSearchedParams))}}return m.\u0275fac=function(d){return new(d||m)(L.\u0275\u0275inject(r.yV),L.\u0275\u0275inject(j.D),L.\u0275\u0275inject(F.q),L.\u0275\u0275inject(R.jE),L.\u0275\u0275inject(O.eN))},m.\u0275prov=L.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},5069:(A,I,a)=>{a.d(I,{q:()=>f});var r=a(1824),S=a(8260),l=a(3668),e=a(4522);let f=(()=>{class g extends r.c8{constructor(s,h){super("media_objects",s),this.serviceElementsFactory=s,this.http=h,this.server=S.N.serverURL}Upload(s){let h=`${this.server}/api/media_objects`,u=new FormData;return u.append("file",s,s.name),this.http.post(h,u,{reportProgress:!0,responseType:"json"}).pipe()}}return g.\u0275fac=function(s){return new(s||g)(l.\u0275\u0275inject(r.yV),l.\u0275\u0275inject(e.eN))},g.\u0275prov=l.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},7773:(A,I,a)=>{a.r(I),a.d(I,{nodeModule:()=>q});var r=a(7317),S=a(9167),l=a(9133),e=a(3668),f=a(2360),g=a(1950),p=a(6019),s=a(9785);function h(t,o){1&t&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Ce champ est obligatoire."),e.\u0275\u0275elementEnd())}function u(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"div",19),e.\u0275\u0275template(1,h,2,0,"span",20),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.nodeService.titre.errors.required)}}function x(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"ng-option",21),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=o.$implicit;e.\u0275\u0275property("value","/api/departments/"+n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.titre)}}function B(t,o){1&t&&e.\u0275\u0275element(0,"i",22)}const D=function(t){return{"is-invalid":t}};let L=(()=>{class t{constructor(n,i){this.fb=n,this.nodeService=i,this.breadCrumbItems=[{label:"Appareils"},{label:"Nouvel appareil",active:!0}],i.loadDepartments(!1),i.nodeForm=this.fb.group({titre:["",l.kI.required],department:[""]})}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(l.qu),e.\u0275\u0275directiveInject(f.B))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-node-create"]],decls:29,vars:15,consts:[[1,"container-fluid"],["title","Nouvel appareil",3,"Loading","breadcrumbItems"],[1,"row","mt-4",3,"formGroup","ngSubmit"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"mb-3","row"],["for","name-input",1,"col-md-2","col-form-label"],[1,"col-md-10"],["formControlName","titre","type","text","id","name-input",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","department","placeholder","D\xe9par.."],[3,"value",4,"ngFor","ngForOf"],[1,"row","justify-content-end"],[1,"col-auto"],["routerLink","/nodes",1,"btn","btn-light","me-2"],[1,"fas","fa-arrow-circle-left","me-1"],[1,"btn","btn-primary"],["class","bx bx-loader-alt fa-spin",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"],[1,"bx","bx-loader-alt","fa-spin"]],template:function(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"form",2),e.\u0275\u0275listener("ngSubmit",function(){return i.nodeService.onCreate()}),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275elementStart(8,"label",7),e.\u0275\u0275text(9,"Titre"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",8),e.\u0275\u0275element(11,"input",9),e.\u0275\u0275template(12,u,2,1,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",6),e.\u0275\u0275elementStart(14,"label",7),e.\u0275\u0275text(15,"D\xe9part"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",8),e.\u0275\u0275elementStart(17,"ng-select",11),e.\u0275\u0275template(18,x,2,2,"ng-option",12),e.\u0275\u0275pipe(19,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",13),e.\u0275\u0275elementStart(21,"div",14),e.\u0275\u0275elementStart(22,"button",15),e.\u0275\u0275element(23,"i",16),e.\u0275\u0275text(24,"Retour \xe0 la liste"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"button",17),e.\u0275\u0275template(26,B,1,0,"i",18),e.\u0275\u0275pipe(27,"async"),e.\u0275\u0275text(28," Ajouter"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("Loading",e.\u0275\u0275pipeBind1(2,7,i.nodeService.loading$))("breadcrumbItems",i.breadCrumbItems),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",i.nodeService.nodeForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(13,D,i.nodeService.titre.invalid&&i.nodeService.submitted)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.nodeService.submitted&&i.nodeService.titre.errors),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(19,9,i.nodeService.departments$)),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(27,11,i.nodeService.loading$)))},directives:[g.V,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,p.NgClass,p.NgIf,s.w9,p.NgForOf,r.rH,s.xv],pipes:[p.AsyncPipe],encapsulation:2}),t})();var j=a(7686);const F=function(t){return["/departments/details",t]};function R(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"a",12),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("routerLink",n.authService.isAuthorized("departments_details")?e.\u0275\u0275pureFunction1(2,F,n.node.department.id):null),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.node.department.titre)}}function O(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"tbody"),e.\u0275\u0275elementStart(1,"tr"),e.\u0275\u0275elementStart(2,"th",9),e.\u0275\u0275text(3,"Nom :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"tr",10),e.\u0275\u0275elementStart(7,"th",9),e.\u0275\u0275text(8,"D\xe9part :"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275template(10,R,2,4,"a",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(n.node.titre),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",n.node.department)}}let U=(()=>{class t{constructor(n,i,_){this.route=n,this.service=i,this.authService=_;let b=this.route.snapshot.paramMap.get("id");i.getByKey(b).subscribe(K=>this.node=K)}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(r.gz),e.\u0275\u0275directiveInject(f.B),e.\u0275\u0275directiveInject(j.$))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-node-details"]],decls:11,vars:5,consts:[[1,"container-fluid"],["title","D\xe9tails de l'appareil",3,"Loading","breadcrumbItems"],[1,"card","mt-4"],[1,"card-body","pt-5"],[1,"table-responsive"],[1,"table","table-nowrap","mb-0"],[4,"ngIf"],["routerLink","/nodes",1,"btn","btn-light","mt-4","float-end"],[1,"fas","fa-arrow-circle-left","me-1"],["scope","row"],["valign","middle"],["target","_blank","rel","noopener noreferrer",3,"routerLink",4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"routerLink"]],template:function(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275elementStart(6,"table",5),e.\u0275\u0275template(7,O,11,2,"tbody",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"button",7),e.\u0275\u0275element(9,"i",8),e.\u0275\u0275text(10,"Retour \xe0 la liste"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("Loading",e.\u0275\u0275pipeBind1(2,3,i.service.loading$))("breadcrumbItems",i.breadCrumbItems),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",i.node))},directives:[g.V,p.NgIf,r.rH,r.yS],pipes:[p.AsyncPipe],encapsulation:2}),t})();function m(t,o){1&t&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Ce champ est obligatoire."),e.\u0275\u0275elementEnd())}function E(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"div",19),e.\u0275\u0275template(1,m,2,0,"span",20),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.nodeService.titre.errors.required)}}function d(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"ng-option",21),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=o.$implicit;e.\u0275\u0275property("value","/api/departments/"+n.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.titre)}}function c(t,o){1&t&&e.\u0275\u0275element(0,"i",22)}const v=function(t){return{"is-invalid":t}};let C=(()=>{class t{constructor(n,i,_){this.route=n,this.fb=i,this.nodeService=_,this.breadCrumbItems=[{label:"Appareils"},{label:"Mettre \xe0 jour l'appareil",active:!0}],this.id=Number(this.route.snapshot.paramMap.get("id")),_.loadDepartments(),_.nodeForm=this.fb.group({titre:["",l.kI.required],department:[""],postes:[[]]}),_.getByKey(this.id).subscribe(b=>{_.nodeForm.patchValue({titre:b.titre,department:b.department?b.department["@id"]:null})})}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(r.gz),e.\u0275\u0275directiveInject(l.qu),e.\u0275\u0275directiveInject(f.B))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-node-update"]],decls:30,vars:18,consts:[[1,"container-fluid"],["title","Mettre \xe0 jour l'appareil",3,"Loading","breadcrumbItems"],[1,"row","mt-4",3,"formGroup","ngSubmit"],[1,"col-12",3,"disabled"],[1,"card"],[1,"card-body"],[1,"mb-3","row"],["for","name-input",1,"col-md-2","col-form-label"],[1,"col-md-10"],["formControlName","titre","type","text","id","name-input",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","department","placeholder","D\xe9par.."],[3,"value",4,"ngFor","ngForOf"],[1,"row","justify-content-end"],[1,"col-auto"],["routerLink","/nodes",1,"btn","btn-light","me-2"],[1,"fas","fa-arrow-circle-left","me-1"],[1,"btn","btn-primary"],["class","bx bx-loader-alt fa-spin",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"],[1,"bx","bx-loader-alt","fa-spin"]],template:function(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-page-title",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"form",2),e.\u0275\u0275listener("ngSubmit",function(){return i.nodeService.onUpdate(i.id)}),e.\u0275\u0275elementStart(4,"fieldset",3),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275elementStart(6,"div",4),e.\u0275\u0275elementStart(7,"div",5),e.\u0275\u0275elementStart(8,"div",6),e.\u0275\u0275elementStart(9,"label",7),e.\u0275\u0275text(10,"Titre"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",8),e.\u0275\u0275element(12,"input",9),e.\u0275\u0275template(13,E,2,1,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",6),e.\u0275\u0275elementStart(15,"label",7),e.\u0275\u0275text(16,"D\xe9part"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",8),e.\u0275\u0275elementStart(18,"ng-select",11),e.\u0275\u0275template(19,d,2,2,"ng-option",12),e.\u0275\u0275pipe(20,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",13),e.\u0275\u0275elementStart(22,"div",14),e.\u0275\u0275elementStart(23,"button",15),e.\u0275\u0275element(24,"i",16),e.\u0275\u0275text(25,"Retour \xe0 la liste"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"button",17),e.\u0275\u0275template(27,c,1,0,"i",18),e.\u0275\u0275pipe(28,"async"),e.\u0275\u0275text(29," Sauvegarder"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("Loading",e.\u0275\u0275pipeBind1(2,8,i.nodeService.loading$))("breadcrumbItems",i.breadCrumbItems),e.\u0275\u0275advance(2),e.\u0275\u0275property("formGroup",i.nodeService.nodeForm),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(5,10,i.nodeService.loading$)),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(16,v,i.nodeService.titre.invalid&&i.nodeService.submitted)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.nodeService.submitted&&i.nodeService.titre.errors),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(20,12,i.nodeService.departments$)),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",i.nodeService.submitted&&e.\u0275\u0275pipeBind1(28,14,i.nodeService.loading$)))},directives:[g.V,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,p.NgClass,p.NgIf,s.w9,p.NgForOf,r.rH,s.xv],pipes:[p.AsyncPipe],encapsulation:2}),t})();var y=a(6015);function T(t,o){1&t&&(e.\u0275\u0275elementStart(0,"a",27),e.\u0275\u0275element(1,"i",28),e.\u0275\u0275text(2," Ajouter"),e.\u0275\u0275elementEnd())}function P(t,o){1&t&&(e.\u0275\u0275elementStart(0,"td",29),e.\u0275\u0275text(1," Chargement... "),e.\u0275\u0275elementEnd())}function M(t,o){1&t&&(e.\u0275\u0275elementStart(0,"td",29),e.\u0275\u0275text(1," Aucune donn\xe9e trouv\xe9e ! "),e.\u0275\u0275elementEnd())}const $=function(t){return["/departments/details",t]};function W(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"a",34),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("routerLink",i.authService.isAuthorized("departments_details")?e.\u0275\u0275pureFunction1(2,$,n.department.id):null),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.department.titre)}}const z=function(t){return["details",t]};function N(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"a",40),e.\u0275\u0275element(1,"i",41),e.\u0275\u0275text(2," Voir "),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction1(1,z,n.id))}}const V=function(t){return["update",t]};function w(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"a",40),e.\u0275\u0275element(1,"i",42),e.\u0275\u0275text(2," Modifier "),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction1(1,V,n.id))}}function G(t,o){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",43),e.\u0275\u0275listener("click",function(_){e.\u0275\u0275restoreView(n);const b=e.\u0275\u0275nextContext(2).$implicit;return e.\u0275\u0275nextContext().service.deleteItem(b.id,_.target)}),e.\u0275\u0275element(1,"i",44),e.\u0275\u0275text(2," Supprimer "),e.\u0275\u0275elementEnd()}}function J(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"div",35),e.\u0275\u0275element(1,"i",36),e.\u0275\u0275elementStart(2,"div",37),e.\u0275\u0275template(3,N,3,3,"a",38),e.\u0275\u0275template(4,w,3,3,"a",38),e.\u0275\u0275template(5,G,3,0,"a",39),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.authService.isAuthorized("nodes_details")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.authService.isAuthorized("nodes_update")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.authService.isAuthorized("nodes_delete"))}}function Q(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"tr"),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275element(2,"ngb-highlight",30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275element(4,"ngb-highlight",30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275template(6,W,2,4,"a",31),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td",32),e.\u0275\u0275template(8,J,6,3,"div",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t){const n=o.$implicit,i=e.\u0275\u0275nextContext(),_=e.\u0275\u0275reference(25),b=e.\u0275\u0275reference(28);e.\u0275\u0275advance(2),e.\u0275\u0275property("result",n.id)("term",_.value),e.\u0275\u0275advance(2),e.\u0275\u0275property("result",n.titre)("term",b.value),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.department),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.authService.isAuthorized("nodes_details")||i.authService.isAuthorized("nodes_update")||i.authService.isAuthorized("nodes_delete"))}}function H(t,o){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",46),e.\u0275\u0275elementStart(1,"div",47),e.\u0275\u0275elementStart(2,"div",48),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",47),e.\u0275\u0275elementStart(5,"div",49),e.\u0275\u0275elementStart(6,"ngb-pagination",50),e.\u0275\u0275listener("pageChange",function(_){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext(2).service.page=_})("pageChange",function(_){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext(2).service.onPaginate(_)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&t){const n=e.\u0275\u0275nextContext().ngIf,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate3(" Affichage de ",n.startIndex," \xe0 ",n.endIndex," de ",n.totalRecords," entr\xe9es "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",n.totalRecords)("page",i.service.page)("pageSize",i.service.pageSize)("maxSize",5)}}function Y(t,o){if(1&t&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,H,7,7,"div",45),e.\u0275\u0275elementContainerEnd()),2&t){const n=o.ngIf,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.totalRecords>i.service.pageSize)}}const X=[{path:"",component:(()=>{class t{constructor(n,i,_,b){this.service=n,this.fb=i,this.authService=_,this.config=b,n.findAll(),n.loadDepartments(!1),n.nodeForm=i.group({id:[""],titre:[""],"department.id[]":[""]}),b.notFoundText="Aucune donn\xe9e trouv\xe9e !"}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(f.B),e.\u0275\u0275directiveInject(l.qu),e.\u0275\u0275directiveInject(j.$),e.\u0275\u0275directiveInject(s.$q))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-nodes-list"]],decls:52,vars:28,consts:[[1,"container-fluid","mb-5"],[1,"row","align-items-center","justify-content-between","mb-4"],[1,"col-auto"],["title","Les appareils de coupeur",3,"breadcrumbItems"],["routerLink","/nodes/add","class","btn btn-primary ms-2",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"table-responsive",3,"formGroup","ngSubmit"],[1,"table","table-bordered"],["width","100px"],["width","123px"],["valign","middle"],["type","text","placeholder","ID...","formControlName","id",1,"form-control"],["searchId",""],["type","text","placeholder","Titre...","formControlName","titre",1,"form-control"],["searchTitre",""],["formControlName","department.id[]","bindLabel","titre","bindValue","id","placeholder","D\xe9part..","typeToSearchText","Veuillez saisir 2 caract\xe8res ou plus",3,"items","multiple","minTermLength","loading","typeahead"],["searchDepar",""],["type","submit",1,"btn","btn-sm","btn-primary","d-flex","align-items-center"],[1,"bx","bx-search","me-1"],["type","reset",1,"btn","btn-sm","text-primary","flex","align-items-center",3,"click"],[1,"bx","bx-x","me-1"],["class","text-center","colspan","4",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["routerLink","/nodes/add",1,"btn","btn-primary","ms-2"],[1,"fas","fa-plus-circle"],["colspan","4",1,"text-center"],[3,"result","term"],["target","_blank","rel","noopener noreferrer",3,"routerLink",4,"ngIf"],["align","center"],["ngbDropdown","","container","body","placement","bottom-right",4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"routerLink"],["ngbDropdown","","container","body","placement","bottom-right"],["ngbDropdownToggle","","data-toggle","dropdown","aria-expanded","true",1,"fas","fa-ellipsis-h","dropdown-toggle","c-pointer"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["class","dropdown-item","href","javascript: void(0);",3,"routerLink",4,"ngIf"],["class","dropdown-item text-danger","href","javascript: void(0);",3,"click",4,"ngIf"],["href","javascript: void(0);",1,"dropdown-item",3,"routerLink"],[1,"fas","fa-eye","me-2"],[1,"fas","fa-edit","me-2"],["href","javascript: void(0);",1,"dropdown-item","text-danger",3,"click"],[1,"fas","fa-trash","me-2"],["class","row justify-content-md-between align-items-md-center mt-2",4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","page","pageSize","maxSize","pageChange"]],template:function(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275element(3,"app-page-title",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",2),e.\u0275\u0275template(5,T,3,0,"a",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",5),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275elementStart(8,"div",7),e.\u0275\u0275elementStart(9,"div",8),e.\u0275\u0275elementStart(10,"form",9),e.\u0275\u0275listener("ngSubmit",function(){return i.service.onSearch()}),e.\u0275\u0275elementStart(11,"table",10),e.\u0275\u0275elementStart(12,"thead"),e.\u0275\u0275elementStart(13,"tr"),e.\u0275\u0275elementStart(14,"th",11),e.\u0275\u0275text(15,"ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th"),e.\u0275\u0275text(17,"Appareil de coupeur"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"th"),e.\u0275\u0275text(19,"D\xe9part"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(20,"th",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"tbody"),e.\u0275\u0275elementStart(22,"tr",13),e.\u0275\u0275elementStart(23,"td"),e.\u0275\u0275element(24,"input",14,15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"td"),e.\u0275\u0275element(27,"input",16,17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"td"),e.\u0275\u0275element(30,"ng-select",18,19),e.\u0275\u0275pipe(32,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"td"),e.\u0275\u0275elementStart(34,"button",20),e.\u0275\u0275element(35,"i",21),e.\u0275\u0275text(36,"Rechercher "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"button",22),e.\u0275\u0275listener("click",function(){return i.service.findAll()}),e.\u0275\u0275element(38,"i",23),e.\u0275\u0275text(39,"R\xe9initialiser "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"tr"),e.\u0275\u0275template(41,P,2,0,"td",24),e.\u0275\u0275pipe(42,"async"),e.\u0275\u0275pipe(43,"async"),e.\u0275\u0275template(44,M,2,0,"td",24),e.\u0275\u0275pipe(45,"async"),e.\u0275\u0275pipe(46,"async"),e.\u0275\u0275pipe(47,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(48,Q,9,6,"tr",25),e.\u0275\u0275pipe(49,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(50,Y,2,1,"ng-container",26),e.\u0275\u0275pipe(51,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("breadcrumbItems",i.breadCrumbItems),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.authService.isAuthorized("nodes_add")),e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",i.service.nodeForm),e.\u0275\u0275advance(20),e.\u0275\u0275property("items",e.\u0275\u0275pipeBind1(32,12,i.service.departments$))("multiple",!0)("minTermLength",2)("loading",i.service.departmentLoading)("typeahead",i.service.departmentInput$),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(42,14,!e.\u0275\u0275pipeBind1(43,16,i.service.nodes$)&&i.service.loading$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(45,18,e.\u0275\u0275pipeBind1(46,20,i.service.nodes$)&&0===e.\u0275\u0275pipeBind1(47,22,i.service.nodes$).length&&i.service.loaded$)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(49,24,i.service.nodes$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(51,26,i.service.pagination$)))},directives:[g.V,p.NgIf,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,s.w9,p.NgForOf,r.yS,y._h,y.jt,y.iD,y.Vi,y.N9],pipes:[p.AsyncPipe],encapsulation:2}),t})(),canActivate:[S.p],data:{access:"nodes_show"}},{path:"add",component:L,canActivate:[S.p],data:{access:"nodes_add"}},{path:"update/:id",component:C,canActivate:[S.p],data:{access:"nodes_update"}},{path:"details/:id",component:U,canActivate:[S.p],data:{access:"nodes_details"}}];let Z=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[[r.Bz.forChild(X)],r.Bz]}),t})();var k=a(9922);let q=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[[Z,k.m]]}),t})()},2360:(A,I,a)=>{a.d(I,{B:()=>R});var r=a(1824),S=a(3405),l=a(3596),e=a(2411),f=a(5686),g=a(5389),p=a(8735),s=a(1366),h=a(9204),u=a(2047),x=a(8053),B=a(8260),D=a(3668),L=a(5633),j=a(6761),F=a(8274);let R=(()=>{class O extends r.c8{constructor(m,E,d,c){super("nodes",m),this.serviceElementsFactory=m,this.confirmDialogService=E,this.departmentService=d,this.toast=c,this.pageSize=B.N.pageSize,this.departmentLoading=!1,this.departmentInput$=new S.xQ,this.submitted=!1,this.page=1}findAll(){this.findByCriteria({page:1})}loadDepartments(m=!0){this.departments$=m?(0,l.z)((0,e.of)([]),this.departmentInput$.pipe((0,f.b)(500),(0,g.x)(),(0,p.h)(E=>null!=E),(0,s.b)(()=>this.departmentLoading=!0),(0,h.w)(E=>this.departmentService.getWithQuery("properties[]=id&properties[]=titre&titre="+E).pipe((0,u.K)(()=>(0,e.of)([])),(0,s.b)(()=>this.departmentLoading=!1))))):this.departmentService.getWithQuery("properties[]=id&properties[]=titre")}getPagination(){this.pagination$=(0,e.of)(),this.pagination$=this.selectors$.entityActions$.pipe((0,x.U)(m=>m.payload.pagination))}deleteItem(m,E){this.confirmDialogService.setConfirmation("Vous \xeates s\xfbr de vouloir supprimer cet node ?",()=>{this.delete(m).pipe(this.toast.observe({loading:"Suppression...",success:()=>(E.closest("tr").remove(),"L'node supprim\xe9 avec succ\xe8s"),error:"un probl\xe8me est survenu, veuillez r\xe9essayer"})).subscribe()})}onSearch(){this.page=1,this.lastSearchedParams=this.nodeForm.value,this.findByCriteria(Object.assign({page:1},this.lastSearchedParams))}onCreate(){let m=this.nodeForm;if(this.submitted=!0,m.invalid)return;this.submitted=!1;let E=this.toast;this.add(m.value).subscribe({error:()=>E.error("un probl\xe8me est survenu, veuillez r\xe9essayer"),complete(){m.reset(),E.success("L'node ajout\xe9 avec succ\xe8s")}})}onUpdate(m){let E=this.nodeForm;if(this.submitted=!0,E.invalid)return;this.submitted=!1;let d=this.toast,c=Object.assign({},E.value);c.id=m,this.update(c).subscribe({error:()=>d.error("un probl\xe8me est survenu, veuillez r\xe9essayer"),complete(){d.success("L'node a \xe9t\xe9 mis \xe0 jour avec succ\xe8s")}})}get titre(){return this.nodeForm.get("titre")}get membres(){return this.nodeForm.get("membres")}get departments(){return this.nodeForm.get("departments")}findByCriteria(m){this.nodes$=(0,e.of)([]);let E=Object.keys(m).filter(d=>""!=m[d]&&null!=m[d]).reduce((d,c)=>Object.assign(Object.assign({},d),{[c]:m[c]}),{});this.nodes$=this.getWithQuery(E),this.getPagination()}onPaginate(m){this.findByCriteria(Object.assign({page:m},this.lastSearchedParams))}}return O.\u0275fac=function(m){return new(m||O)(D.\u0275\u0275inject(r.yV),D.\u0275\u0275inject(L.D),D.\u0275\u0275inject(j.l),D.\u0275\u0275inject(F.jE))},O.\u0275prov=D.\u0275\u0275defineInjectable({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},1950:(A,I,a)=>{a.d(I,{V:()=>p});var r=a(3668),S=a(6019);function l(s,h){1&s&&(r.\u0275\u0275elementStart(0,"div",8),r.\u0275\u0275elementStart(1,"span",9),r.\u0275\u0275text(2,"Loading..."),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function e(s,h){if(1&s&&(r.\u0275\u0275elementStart(0,"li",12),r.\u0275\u0275elementStart(1,"a",13),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&s){const u=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(u.label)}}function f(s,h){if(1&s&&(r.\u0275\u0275elementStart(0,"li",14),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&s){const u=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1("",u.label," ")}}function g(s,h){if(1&s&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,e,3,1,"li",10),r.\u0275\u0275template(2,f,2,1,"li",11),r.\u0275\u0275elementContainerEnd()),2&s){const u=h.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!u.active),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",u.active)}}let p=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275cmp=r.\u0275\u0275defineComponent({type:s,selectors:[["app-page-title"]],inputs:{breadcrumbItems:"breadcrumbItems",title:"title",Loading:"Loading"},decls:9,vars:3,consts:[[1,"row"],[1,"col-12"],[1,"page-title-box","d-flex","align-items-center","justify-content-between"],[1,"mb-0","font-size-18"],["role","status","class","spinner-grow ms-1 spinner-grow-sm text-primary",4,"ngIf"],[1,"page-title-right","d-none","d-md-block"],[1,"breadcrumb","m-0"],[4,"ngFor","ngForOf"],["role","status",1,"spinner-grow","ms-1","spinner-grow-sm","text-primary"],[1,"sr-only"],["class","breadcrumb-item",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[1,"breadcrumb-item"],["href","javascript: void(0);"],[1,"breadcrumb-item","active"]],template:function(u,x){1&u&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275elementStart(1,"div",1),r.\u0275\u0275elementStart(2,"div",2),r.\u0275\u0275elementStart(3,"h4",3),r.\u0275\u0275text(4),r.\u0275\u0275template(5,l,3,0,"div",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",5),r.\u0275\u0275elementStart(7,"ol",6),r.\u0275\u0275template(8,g,3,2,"ng-container",7),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&u&&(r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate1(" ",x.title," "),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",x.Loading),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngForOf",x.breadcrumbItems))},directives:[S.NgIf,S.NgForOf],encapsulation:2}),s})()}}]);