{"version":3,"file":"default-src_app_pages_related-anomalies_related-anomalies_module_ts.js","mappings":"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","sources":["./src/app/pages/related-anomalies/related-anomalies.component.ts","./src/app/pages/related-anomalies/related-anomalies.component.html","./src/app/pages/related-anomalies/related-anomalies.module.ts"],"sourcesContent":["import { Component, EventEmitter, Input, OnChanges, Output, SimpleChanges } from \"@angular/core\";\r\nimport { FormArray, FormBuilder, FormGroup, Validators } from \"@angular/forms\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { NgSelectConfig } from \"@ng-select/ng-select\";\r\nimport { AuthenticationService } from \"src/app/core/services/auth.service\";\r\nimport { anomalyService } from \"../anomalies/anomaly.service\";\r\nimport { ViewportScroller } from \"@angular/common\";\r\n\r\n\r\n@Component({\r\n  selector: \"app-related-anomalies\",\r\n  templateUrl: \"./related-anomalies.component.html\",\r\n})\r\nexport class relatedAnomaliesComponent implements OnChanges {\r\n  breadCrumbItems: Array<{}>;\r\n  @Input() anomalies: FormArray;\r\n  @Input() parentFormGroup: FormGroup;\r\n  @Input() showErrors: boolean;\r\n  @Input() currentEdge: any = { ANode: null, BNode: null, department: null, type: null };\r\n  @Output() addAlert: EventEmitter<{ message: string, type: string }> = new EventEmitter<{ message: string, type: string }>();\r\n\r\n  constructor(\r\n    public service: anomalyService,\r\n    private fb: FormBuilder,\r\n    public authService: AuthenticationService,\r\n    public anomalyService: anomalyService,\r\n    private config: NgSelectConfig,\r\n    private route: ActivatedRoute,\r\n    private viewportScroller: ViewportScroller,\r\n  ) { }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    let change = changes.currentEdge;\r\n    if (change && change.currentValue) {\r\n\r\n\r\n      const { ANode, BNode, department, type } = change.currentValue;\r\n\r\n      // Check if the objects are equal (excluding the 'type' property)\r\n      const OnlyTypeChanged = change.previousValue && JSON.stringify(\r\n        { ...change.currentValue, type: change.previousValue.type }\r\n      ) === JSON.stringify(\r\n        { ...change.previousValue, type: type }\r\n      );\r\n\r\n\r\n      if (ANode && ANode.trim() !== '' && !OnlyTypeChanged) {\r\n\r\n        this.anomalyService.getRelatedAnomalies(ANode, BNode, department);\r\n\r\n        // scroll to anomalies\r\n        this.anomalyService.loading$.pipe().subscribe(loading => {\r\n          !loading && setTimeout(() => this.route.fragment.subscribe(f =>\r\n            f && this.viewportScroller.scrollToAnchor(f)), 50);\r\n        });\r\n      }\r\n\r\n      // disable validation if is Coupeur / Ouverture\r\n      if (!change.previousValue || change.previousValue.type != type) {\r\n        let anomalyFormArray = this.anomalies as FormArray;\r\n        // let anomalyFormArray =  this.parentFormGroup.get(\"anomalies\") as FormArray;\r\n        // Disable each control within the FormArray\r\n        if(anomalyFormArray) {\r\n          for (const control of anomalyFormArray.controls) {\r\n            type != 'false' ? control.enable() : control.disable();\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Anomalies CRUD\r\n  newAnomaly(): FormGroup {\r\n    return this.fb.group({\r\n      severity: [\"\"],\r\n      status: [false],\r\n      edge: [\"\", Validators.required],\r\n      title: [\"\", Validators.required],\r\n    })\r\n  }\r\n\r\n  addAnomaly() {\r\n    if (!this.currentEdge.ANode)\r\n      this.addAlert.emit({ message: \"Vous devez choisir un Point coupure, pour pouvoir créer une anomalie.\", type: \"danger\" });\r\n    else if (this.currentEdge.type == null)\r\n      this.addAlert.emit({ message: \"Vous devez choisir le type de coupure !\", type: \"danger\" });\r\n    else\r\n      this.anomalies.push(this.newAnomaly());\r\n  }\r\n\r\n  removeAnomaly(i: number) {\r\n    this.anomalies.removeAt(i);\r\n  }\r\n\r\n  AlertEdgeChange() {\r\n    this.addAlert.emit({ message: \"Vous devez choisir un Point coupure, pour pouvoir choisir un tronçon !\", type: \"danger\" });\r\n  }\r\n}\r\n"," <!-- list des anomalies -->\r\n <div class=\"col-12\" id=\"anomalies-list\">\r\n  <div class=\"card card-body\">\r\n    <p class=\"card-title mb-3\">Anomalies liées</p>\r\n    <div class=\"table-responsive\">\r\n      <table class=\"table table-bordered table-striped\">\r\n        <thead>\r\n          <tr>\r\n            <th width=\"10%\">Statut</th>\r\n            <th width=\"10%\">Priorité</th>\r\n            <th>Anomalie</th>\r\n            <th width=\"15%\">Créé par</th>\r\n            <th width=\"15%\">Tronçon</th>\r\n            <th width=\"15%\">Date</th>\r\n            <th width=\"50px\"></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <!-- state -->\r\n          <tr>\r\n            <td\r\n              class=\"text-center\"\r\n              colspan=\"8\"\r\n              *ngIf=\"currentEdge && currentEdge.ANode && currentEdge.ANode && !(anomalyService.anomalies$ | async) && anomalyService.loading$ | async\"\r\n            >\r\n              Chargement...\r\n            </td>\r\n            <td\r\n              class=\"text-center\"\r\n              colspan=\"8\"\r\n              *ngIf=\"!(currentEdge && currentEdge.ANode && currentEdge.ANode) || ((anomalyService.anomalies$ | async) && (anomalyService.anomalies$ | async).length === 0 && anomalyService.loaded$ | async)\"\r\n            >\r\n            Aucune donnée trouvée !\r\n            </td>\r\n          </tr>\r\n          <!-- data -->\r\n          <ng-container *ngIf=\"currentEdge && currentEdge.ANode && currentEdge.ANode\">\r\n            <tr *ngFor=\"let item of (anomalyService.anomalies$ | async); let i = index\" valign=\"middle\">\r\n              <!-- status -->\r\n              <!-- Terminé / En attente-->\r\n              <td>\r\n                <ui-switch \r\n                    [checked]=\"item.status ? item.status : false\" \r\n                    [disabled]=\"!authService.isAuthorized('anomalies_update')\" \r\n                    (changeEvent)=\"anomalyService.updateStatus($event, item.id)\"\r\n                    [loading]=\"anomalyService.statusLoading === item.id\"\r\n                    uncheckedLabel=\"En attente\"\r\n                    checkedLabel=\"Terminé\"\r\n                    checkedTextColor=\"#fff\"\r\n                >\r\n                <i class=\"fa fa-spinner fa-pulse\" *ngIf=\"anomalyService.statusLoading === item.id\"></i>\r\n              </ui-switch>\r\n              </td>\r\n              <!-- severity -->\r\n              <!-- élevé, faible ou normal -->\r\n              <td>\r\n                <span class=\"badge badge-pill font-size-11 badge-soft-{{ anomalyService.getSeverity(item.severity, true) }}\">\r\n                  {{anomalyService.getSeverity(item.severity, false)}}\r\n                </span>\r\n              </td>\r\n              <!-- title -->\r\n              <td>{{item.title}}</td>\r\n              <!-- Créé par -->\r\n              <td>\r\n                <a \r\n                  *ngIf=\"item.createdBy\"\r\n                  [routerLink]=\"authService.isAuthorized('users_details') ? ['/users/details', item.createdBy.id] : null\"\r\n                  target=\"_blank\" class=\"d-flex align-items-center\">\r\n                  <div class=\"header-profile-user bg-transparent me-2\"><span class=\"avatar-title rounded-circle bg-transparent border text-muted small\"><i class=\"fas fa-user\"></i></span></div>\r\n                  {{item.createdBy.fullName}}\r\n                </a>\r\n              </td>\r\n              <!-- tronçon -->\r\n              <td>\r\n                 <a *ngIf=\"item.edge\"\r\n                    [routerLink]=\"authService.isAuthorized('edges_details') ? ['/edges/details', item.edge.id] : null\"\r\n                    target=\"_blank\">{{item.edge.node_a.titre}} - {{item.edge.node_b.titre}}</a>\r\n              </td>\r\n               <!-- date -->\r\n               <td>{{item.createdAt | date:'medium':'Africa/Casablanca'}}</td>\r\n\r\n              <!-- actions -->\r\n              <td align=\"center\">\r\n                <div ngbDropdown \r\n                  placement=\"bottom-left\"\r\n                  *ngIf=\"authService.isAuthorized('anomalies_details') || authService.isAuthorized('anomalies_update') || authService.isAuthorized('anomalies_delete')\"\r\n                  >\r\n                  <i\r\n                    class=\"fas fa-ellipsis-h dropdown-toggle c-pointer\"\r\n                    ngbDropdownToggle\r\n                    data-toggle=\"dropdown\"\r\n                    aria-expanded=\"true\"\r\n                  ></i>\r\n                  <div\r\n                    class=\"dropdown-menu dropdown-menu-end\"\r\n                    ngbDropdownMenu\r\n                  >\r\n                    <a class=\"dropdown-item\"\r\n                      [routerLink]=\"['/anomalies/details', item.id]\"\r\n                      href=\"javascript: void(0);\"\r\n                      *ngIf=\"authService.isAuthorized('anomalies_details')\"\r\n                      >\r\n                      <i class=\"fas fa-eye me-2\"></i> Voir\r\n                    </a>\r\n                    <a\r\n                      class=\"dropdown-item\"\r\n                      href=\"javascript: void(0);\"\r\n                      *ngIf=\"authService.isAuthorized('anomalies_update')\"\r\n                      [routerLink]=\"['/anomalies/update', item.id]\"\r\n                      >\r\n                      <!-- skipLocationChange -->\r\n                      <i class=\"fas fa-edit me-2\"></i> Modifier\r\n                    </a>\r\n                    <a\r\n                      class=\"dropdown-item text-danger\"\r\n                      href=\"javascript: void(0);\"\r\n                      *ngIf=\"authService.isAuthorized('anomalies_delete')\"\r\n                      (click)=\"anomalyService.deleteItem(item.id, $event.target)\"\r\n                    >\r\n                      <i class=\"fas fa-trash me-2\"></i> Supprimer\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n\r\n            </tr>\r\n          </ng-container>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <!-- Pagination -->\r\n    <ng-container *ngIf=\"(anomalyService.pagination$ | async) as pagination\">\r\n      <div\r\n        *ngIf=\"pagination.totalRecords > anomalyService.pageSize\"\r\n        class=\"row justify-content-md-between align-items-md-center mt-2\"\r\n      >\r\n        <div class=\"col-sm-12 col-md-5\">\r\n          <div\r\n            class=\"dataTables_info mb-2\"\r\n            id=\"tickets-table_info\"\r\n            role=\"status\"\r\n            aria-live=\"polite\"\r\n          >\r\n          Affichage de {{pagination.startIndex}} \r\n          à {{pagination.endIndex}} \r\n          de {{pagination.totalRecords}} entrées\r\n          </div>\r\n        </div>\r\n        <div class=\"col-sm-12 col-md-5\">\r\n          <div class=\"text-md-right float-md-end pagination-rounded\">\r\n            <ngb-pagination\r\n              [collectionSize]=\"pagination.totalRecords\"\r\n              [(page)]=\"anomalyService.page\"\r\n              [pageSize]=\"anomalyService.pageSize\"\r\n              (pageChange)=\"anomalyService.onPaginate($event)\" [maxSize]=\"5\" \r\n            >\r\n            </ngb-pagination>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n\r\n  </div>\r\n</div>\r\n\r\n<!-- ajouter anomalies (juste pour les incidents) -->\r\n<div class=\"col-12\" *ngIf=\"currentEdge && currentEdge.type && currentEdge.type!='false'\">\r\n  <form [formGroup]=\"parentFormGroup\" class=\"card card-body\">\r\n    <table class=\"table table-bordered table-striped mb-0\" formArrayName=\"anomalies\">  \r\n      <tr>  \r\n        <th colspan=\"2\"><div>Ajouter des anomalies</div></th>  \r\n        <td width=\"69px\">\r\n          <div class=\"text-end\">\r\n            <button type=\"button\" (click)=\"addAnomaly()\" class=\"btn btn-sm btn-primary\"><i class=\"bx bx-plus fs-4 lh-sm\"></i></button>\r\n          </div>\r\n        </td>  \r\n      </tr>  \r\n      <tr *ngFor=\"let anomaly of anomalies.controls; let i=index\" [formGroupName]=\"i\">  \r\n        <td width=\"40%\">  \r\n          <div class=\"row\">  \r\n            <div class=\"col-lg-6 mb-3 mb-lg-0\">\r\n              <label>Statut</label>\r\n              <ng-select [searchable]=\"false\" formControlName=\"status\" placeholder=\"Statut..\">\r\n                <ng-option [value]=\"true\">Terminé</ng-option>\r\n                <ng-option [value]=\"false\">En attente</ng-option>\r\n              </ng-select>\r\n            </div>  \r\n            <div class=\"col-lg-6 mb-lg-0\">\r\n              <label>Priorité</label>\r\n              <ng-select [searchable]=\"false\" formControlName=\"severity\" placeholder=\"Priorité..\">\r\n                <ng-option *ngFor=\"let option of anomalyService.severityOptions\" [value]=\"option.value\">\r\n                  {{ option.label }}\r\n                </ng-option>\r\n              </ng-select>\r\n            </div>\r\n            <div class=\"col-12 mt-2\">\r\n              <label>Tronçon</label>\r\n              <ng-select \r\n                  formControlName=\"edge\" \r\n                  placeholder=\"Tronçon..\"\r\n                  (open)=\"!(currentEdge && currentEdge.department && currentEdge.department) && AlertEdgeChange()\"\r\n                  [readonly]=\"!(currentEdge && currentEdge.department && currentEdge.department)\"\r\n                  >\r\n                <ng-option *ngFor=\"let edge of (anomalyService.edgesInRange$ | async)\" [value]=\"edge['@id']\">{{edge.node_a.titre}} - {{edge.node_b.titre}}</ng-option>\r\n              </ng-select>\r\n              <div\r\n                *ngIf=\"showErrors && anomaly.get('edge').errors\"\r\n                class=\"invalid-feedback d-block\">\r\n                <span *ngIf=\"anomaly.get('edge').errors.required\">Ce champ est obligatoire.</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </td>  \r\n        <td>  \r\n          <div>  \r\n          <label for=\"input-3\">Anomalie</label>\r\n          <textarea\r\n            formControlName=\"title\"\r\n            id=\"input-3\" \r\n            class=\"form-control\"\r\n            type=\"text\"\r\n            style=\"height: 115px;\"\r\n          ></textarea>\r\n          <div\r\n            *ngIf=\"showErrors && anomaly.get('title').errors\"\r\n            class=\"invalid-feedback d-block\">\r\n            <span *ngIf=\"anomaly.get('title').errors.required\">Ce champ est obligatoire.</span>\r\n          </div>\r\n          </div>  \r\n        </td>  \r\n        <td>  \r\n          <div class=\"p-0\">  \r\n          <div class=\"text-center\">\r\n            <button (click)=\"removeAnomaly(i)\" class=\"btn btn-danger\"><i class=\"fas fa-trash\"></i></button>  \r\n          </div>\r\n          </div>  \r\n        </td>  \r\n      </tr>  \r\n    </table>\r\n\r\n  </form>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { UiSwitchModule } from 'ngx-ui-switch';\r\nimport { relatedAnomaliesComponent } from './related-anomalies.component';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { RouterModule } from '@angular/router';\r\n\r\n@NgModule({\r\n  declarations: [relatedAnomaliesComponent],\r\n  imports: [\r\n    SharedModule, RouterModule,\r\n    UiSwitchModule.forRoot({\r\n      size: 'small',\r\n    }),\r\n  ],\r\n  exports: [relatedAnomaliesComponent],\r\n})\r\nexport class relatedAnomaliesModule {}"],"names":[],"sourceRoot":"webpack:///"}