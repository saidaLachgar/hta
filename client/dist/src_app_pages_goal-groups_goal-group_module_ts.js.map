{"version":3,"file":"src_app_pages_goal-groups_goal-group_module_ts.js","mappings":"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","sources":["./src/app/core/guards/role.guard.ts","./src/app/pages/goal-groups/goal-group-details/goal-group-details.component.ts","./src/app/pages/goal-groups/goal-group-details/goal-group-details.component.html","./src/app/pages/goal-groups/goal-group-routing.module.ts","./src/app/pages/goal-groups/goal-group.module.ts","./src/app/pages/goal-groups/goal-group.service.ts","./src/app/pages/goal-groups/goal-groups-list/goal-groups-list.component.ts","./src/app/pages/goal-groups/goal-groups-list/goal-groups-list.component.html"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, Router } from '@angular/router';\r\nimport { AuthenticationService } from '../services/auth.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class RoleGuard implements CanActivate {\r\n    constructor(private router: Router, private authService: AuthenticationService) { }\r\n    canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\r\n        let authorized = this.authService.isAuthorized(route.data.access);\r\n        if(authorized) return true;\r\n        alert(\"accès refusé\");\r\n        this.router.navigate(['/dashboard']);\r\n        return false;\r\n    }\r\n}\r\n","import { Component } from \"@angular/core\";\r\n\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { GoalGroup } from \"src/app/core/models\";\r\nimport { AuthenticationService } from \"src/app/core/services/auth.service\";\r\nimport { goalGroupService } from \"../goal-group.service\";\r\n\r\n@Component({\r\n  selector: \"app-goal-group-details\",\r\n  templateUrl: \"./goal-group-details.component.html\",\r\n})\r\nexport class goalGroupDetailsComponent {\r\n  goalGroup: GoalGroup;\r\n  breadCrumbItems: Array<{}>;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    public goalGroupService: goalGroupService,\r\n    public authService: AuthenticationService,\r\n  ) {\r\n    let id = route.snapshot.paramMap.get(\"id\");\r\n    goalGroupService.getByKey(id).subscribe(obj => this.goalGroup = obj);\r\n  }\r\n}\r\n","<div class=\"container-fluid\">\r\n  <!-- start page title -->\r\n  <app-page-title\r\n    title=\"Détails de groupe\"\r\n    [breadcrumbItems]=\"breadCrumbItems\"\r\n  ></app-page-title>\r\n  <!-- end page title -->\r\n  <div class=\"card mt-4\">\r\n    <div class=\"card-body pt-5\">\r\n      <div class=\"table-responsive\">\r\n        <table class=\"table table-nowrap mb-0\">\r\n          <tbody *ngIf=\"goalGroup\">\r\n            <tr valign=\"middle\">\r\n              <th scope=\"row\">Titre :</th>\r\n              <td>\r\n                {{goalGroup.name}}\r\n              </td>\r\n            </tr>\r\n            <tr valign=\"middle\">\r\n              <th scope=\"row\">Afficher dans le formulaire de travaux :</th>\r\n              <td>\r\n                {{goalGroup.displayInForms ? \"Oui\" : \"Non\"}}\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <button class=\"btn btn-light mt-4 float-end\" routerLink=\"/goal-group\"><i class=\"fas fa-arrow-circle-left me-1\"></i>Retour à la liste</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n  ","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { RoleGuard } from 'src/app/core/guards/role.guard';\r\nimport { goalGroupDetailsComponent } from './goal-group-details/goal-group-details.component';\r\nimport { goalGroupListComponent } from './goal-groups-list/goal-groups-list.component';\r\n\r\n\r\nconst routes: Routes = [\r\n  {path: '', component: goalGroupListComponent, canActivate: [RoleGuard], data: {access: 'goal_groups_show'}},\r\n  {path: 'details/:id', component: goalGroupDetailsComponent, canActivate: [RoleGuard], data: {access: 'goal_groups_details'}},\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class goalGroupRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\n\r\n// import { UIModule } from 'src/app/shared/ui/ui.module';\r\nimport { goalGroupRoutingModule } from './goal-group-routing.module';\r\n\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { goalGroupListComponent } from './goal-groups-list/goal-groups-list.component';\r\nimport { goalGroupDetailsComponent } from './goal-group-details/goal-group-details.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    goalGroupRoutingModule,\r\n    SharedModule,\r\n  ],\r\n  declarations: [\r\n    goalGroupListComponent,\r\n    goalGroupDetailsComponent,\r\n  ],\r\n})\r\nexport class goalGroupModule { }\r\n","import { Injectable } from \"@angular/core\";\r\nimport { FormGroup } from \"@angular/forms\";\r\nimport { HotToastService } from \"@ngneat/hot-toast\";\r\nimport {\r\n  EntityCollectionServiceBase,\r\n  EntityCollectionServiceElementsFactory\r\n} from \"@ngrx/data\";\r\nimport { Observable, of } from \"rxjs\";\r\nimport { map } from \"rxjs/operators\";\r\nimport { GoalGroup, Pagination } from \"src/app/core/models\";\r\nimport { ConfirmDialogService } from \"src/app/shared/components/confirm-dialog/confirm-dialog.service\";\r\nimport { environment } from \"src/environments/environment\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\nexport class goalGroupService extends EntityCollectionServiceBase<GoalGroup> {\r\n  readonly pageSize = environment.pageSize;\r\n  public goalGroupForm: FormGroup;\r\n  goalGroups$: Observable<GoalGroup[]>;\r\n  pagination$: Observable<Pagination>;\r\n  persistence: boolean | number = false;\r\n  submitted: boolean = false;\r\n  page: number = 1;\r\n  lastSearchedParams;\r\n\r\n  constructor(\r\n    private serviceElementsFactory: EntityCollectionServiceElementsFactory,\r\n    private confirmDialogService: ConfirmDialogService,\r\n    private toast: HotToastService,\r\n  ) {\r\n    super(\"goal_groups\", serviceElementsFactory);\r\n  }\r\n\r\n  /**\r\n   * Get records\r\n   */\r\n  findAll(): void {\r\n    this.findByCriteria({ page: 1 });\r\n  }\r\n\r\n  /**\r\n   * Get pagination\r\n   */\r\n  getPagination(): void {\r\n    this.pagination$ = of(); // reset pagination\r\n    this.pagination$ = this.selectors$.entityActions$.pipe(\r\n      map(action => (action as any).payload.pagination)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Delete item\r\n   * @param id goal_groups id\r\n   * @param target html element\r\n   */\r\n  deleteItem(id: number, target: HTMLElement) {\r\n    this.confirmDialogService.setConfirmation(\"Vous êtes sûr de vouloir supprimer?\", () => {\r\n      this.delete(id)\r\n        .pipe(\r\n          this.toast.observe({\r\n            loading: \"Suppression...\",\r\n            success: () => {\r\n              target.closest(\"tr\").remove();\r\n              return \"Groupe supprimé avec succès\";\r\n            },\r\n            error: \"un problème est survenu, veuillez réessayer\",\r\n          })\r\n        )\r\n        .subscribe();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Search\r\n   */\r\n  onSearch(): void {\r\n    this.page = 1;\r\n    this.lastSearchedParams = this.goalGroupForm.value;\r\n    this.findByCriteria({ page: 1, ...this.lastSearchedParams });\r\n  }\r\n\r\n  /**\r\n   * Persist : Save\r\n   */\r\n  onSave(): void {\r\n    let form = this.goalGroupForm;\r\n    this.submitted = true;\r\n    if (form.invalid) return;\r\n    let toast = this.toast;\r\n    let _this = this;\r\n    let observable: Observable<GoalGroup>;\r\n    if (this.persistence === false) {\r\n      let goalGroup = form.value as GoalGroup;\r\n      observable = this.add(goalGroup);\r\n    } else {\r\n      let goalGroup:GoalGroup = { ...form.value };\r\n      goalGroup.id = this.persistence as number;\r\n      observable = this.update(goalGroup);\r\n    }\r\n    observable.subscribe({\r\n      error: () => toast.error(\"un problème est survenu, veuillez réessayer\"),\r\n      complete() {\r\n        form.reset();\r\n        _this.findByCriteria({ page: 1, ..._this.lastSearchedParams });\r\n        toast.success(`Groupe a été ${_this.persistence === false ? 'ajouté' : 'mis à jour'} avec succès`);\r\n        _this.persistence = false;\r\n        _this.submitted = false;\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Toggle update\r\n   */\r\n  onUpdate(id: number, name: string, displayInForms : boolean): void {\r\n    this.persistence = id;\r\n    this.goalGroupForm.patchValue({\r\n      name: name,\r\n      displayInForms: displayInForms,\r\n    });\r\n  }\r\n\r\n  get name() {\r\n    return this.goalGroupForm.get(\"name\");\r\n  }\r\n\r\n  /**\r\n   * find By Criteria\r\n   * @param obj query parameters\r\n   */\r\n  findByCriteria(obj): void {\r\n    this.goalGroups$ = of([]); // clear table\r\n    // remove empty values\r\n    let queryParams = Object.keys(obj)\r\n      .filter((k) => obj[k] != \"\" && obj[k] != null)\r\n      .reduce((a, k) => ({ ...a, [k]: obj[k] }), {});\r\n    this.goalGroups$ = this.getWithQuery(queryParams);\r\n    this.getPagination();\r\n  }\r\n\r\n  /**\r\n   * on Paginate\r\n   * @param page page to search for\r\n   */\r\n  onPaginate(page: number) {\r\n    this.findByCriteria({ page: page, ...this.lastSearchedParams });\r\n  }\r\n}\r\n","import { Component } from \"@angular/core\";\r\nimport { FormBuilder } from \"@angular/forms\";\r\nimport { AuthenticationService } from \"src/app/core/services/auth.service\";\r\nimport { goalGroupService } from \"../goal-group.service\";\r\n\r\n\r\n@Component({\r\n  selector: \"app-goal-groups-list\",\r\n  templateUrl: \"./goal-groups-list.component.html\",\r\n})\r\nexport class goalGroupListComponent {\r\n  breadCrumbItems: Array<{}>;\r\n\r\n  constructor(\r\n    public service: goalGroupService,\r\n    private fb: FormBuilder,\r\n    public authService: AuthenticationService,\r\n  ) {\r\n    service.findAll();\r\n    service.goalGroupForm = fb.group({\r\n      name: [''],\r\n      displayInForms: [null],\r\n    });\r\n  }\r\n}\r\n","<div class=\"container-fluid mb-5\">\r\n  <div class=\"row align-items-center justify-content-between mb-4\">\r\n    <div class=\"col-auto\">\r\n      <app-page-title\r\n        title=\"Les Groupes\"\r\n        [breadcrumbItems]=\"breadCrumbItems\"\r\n      ></app-page-title>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"row\">\r\n    <div class=\"col-md-{{authService.isAuthorized('goal_groups_add') ? '6' : '12'}}\">\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <!-- Table -->\r\n          <form [formGroup]=\"service.goalGroupForm\" (ngSubmit)=\"service.onSearch()\" class=\"table-responsive\">\r\n            <table class=\"table table-bordered\">\r\n              <tbody>\r\n                <tr valign=\"middle\" \r\n                >\r\n                  <td><input type=\"text\" placeholder=\"Titre...\" formControlName=\"name\" #searchTitre class=\"form-control\"></td>\r\n                  <td width=\"160px\" class=\"text-center\">\r\n                    <button type=\"submit\" class=\"btn btn-sm btn-primary d-flex align-items-center mx-auto\">\r\n                      <i class=\"bx bx-search me-1\"></i>Rechercher\r\n                    </button>\r\n                    <button type=\"reset\" class=\"btn btn-sm text-primary flex align-items-center\" (click)=\"service.findAll()\">\r\n                      <i class=\"bx bx-x me-1\"></i>Réinitialiser\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td\r\n                    class=\"text-center\"\r\n                    colspan=\"5\"\r\n                    *ngIf=\"!(service.goalGroups$ | async) && service.loading$ | async\"\r\n                  >\r\n                    Chargement...\r\n                  </td>\r\n                  <td\r\n                    class=\"text-center\"\r\n                    colspan=\"5\"\r\n                    *ngIf=\"(service.goalGroups$ | async) && (service.goalGroups$ | async).length === 0 && service.loaded$ | async\"\r\n                  >\r\n                  Aucune donnée trouvée !\r\n                  </td>\r\n                </tr>\r\n                <tr *ngFor=\"let item of (service.goalGroups$ | async); let i = index\" valign=\"middle\">\r\n                  <td>\r\n                    <ngb-highlight\r\n                        [result]=\"item.name\"\r\n                        [term]=\"searchTitre.value\"\r\n                      ></ngb-highlight>\r\n                  </td>\r\n                  \r\n                  <td align=\"center\">\r\n                    <div ngbDropdown \r\n                      placement=\"bottom-left\"\r\n                      *ngIf=\"authService.isAuthorized('goal_groups_details') || authService.isAuthorized('goal_groups_update') || authService.isAuthorized('goal_groups_delete')\"\r\n                      >\r\n                      <i\r\n                        class=\"fas fa-ellipsis-h dropdown-toggle c-pointer\"\r\n                        ngbDropdownToggle\r\n                        data-toggle=\"dropdown\"\r\n                        aria-expanded=\"true\"\r\n                      ></i>\r\n                      <div\r\n                        class=\"dropdown-menu dropdown-menu-end\"\r\n                        ngbDropdownMenu\r\n                      >\r\n                        <a class=\"dropdown-item\"\r\n                          [routerLink]=\"['details', item.id]\"\r\n                          href=\"javascript: void(0);\"\r\n                          *ngIf=\"authService.isAuthorized('goal_groups_details')\"\r\n                          >\r\n                          <i class=\"fas fa-eye me-2\"></i> Voir\r\n                        </a>\r\n                        <a\r\n                          class=\"dropdown-item\"\r\n                          href=\"javascript: void(0);\"\r\n                          *ngIf=\"authService.isAuthorized('goal_groups_update')\"\r\n                          (click)=\"service.onUpdate(item.id, item.name, item.display_in_forms)\"\r\n                          >\r\n                          <!-- skipLocationChange -->\r\n                          <i class=\"fas fa-edit me-2\"></i> Modifier\r\n                        </a>\r\n                        <a\r\n                          class=\"dropdown-item text-danger\"\r\n                          href=\"javascript: void(0);\"\r\n                          *ngIf=\"authService.isAuthorized('goal_groups_delete')\"\r\n                          (click)=\"service.deleteItem(item.id, $event.target)\"\r\n                        >\r\n                          <i class=\"fas fa-trash me-2\"></i> Supprimer\r\n                        </a>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </form>\r\n          <!-- End table -->\r\n          <!-- Pagination -->\r\n          <ng-container *ngIf=\"(service.pagination$ | async) as pagination\">\r\n            <div\r\n              *ngIf=\"pagination.totalRecords > service.pageSize\"\r\n              class=\"row justify-content-md-between align-items-md-center mt-2\"\r\n            >\r\n              <div class=\"col-sm-12 col-md-5\">\r\n                <div\r\n                  class=\"dataTables_info mb-2\"\r\n                  id=\"tickets-table_info\"\r\n                  role=\"status\"\r\n                  aria-live=\"polite\"\r\n                >\r\n                Affichage de {{pagination.startIndex}} \r\n                à {{pagination.endIndex}} \r\n                de {{pagination.totalRecords}} entrées\r\n                </div>\r\n              </div>\r\n              <div class=\"col-sm-12 col-md-5\">\r\n                <div class=\"text-md-right float-md-end pagination-rounded\">\r\n                  <ngb-pagination\r\n                    [collectionSize]=\"pagination.totalRecords\"\r\n                    [(page)]=\"service.page\"\r\n                    [pageSize]=\"service.pageSize\"\r\n                    (pageChange)=\"service.onPaginate($event)\" [maxSize]=\"5\" \r\n                  >\r\n                  </ngb-pagination>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </ng-container>\r\n          <!-- End Pagination -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-md-6\" *ngIf=\"authService.isAuthorized('goal_groups_add')\">\r\n      <form class=\"card\" [formGroup]=\"service.goalGroupForm\" (ngSubmit)=\"service.onSave()\">\r\n        <fieldset class=\"card-body justify-content-center d-flex flex-column\">\r\n            \r\n          <div class=\"mb-3 row\">\r\n            <h4 class=\"card-title mt-2 mb-4\">{{service.persistence === false ? \"Créer un Nouveau groupe\" : \"Mise à jour du groupe\"}}</h4>\r\n            <label for=\"name-input\" class=\"col-md-2 col-form-label\">Titre</label>\r\n            <div class=\"col-md-10\">\r\n              <input\r\n                formControlName=\"name\"\r\n                [ngClass]=\"{'is-invalid':service.name.invalid && service.submitted}\"\r\n                class=\"form-control\"\r\n                type=\"text\"\r\n                id=\"name-input\"\r\n                required\r\n              />\r\n              <div\r\n                *ngIf=\"service.submitted && service.name.errors\"\r\n                class=\"invalid-feedback\">\r\n                <span *ngIf=\"service.name.errors.required\">Ce champ est obligatoire.</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"form-check mt-4 ms-3\">\r\n              <input type=\"checkbox\" id=\"display_in_forms\" formControlName=\"displayInForms\" class=\"form-check-input\">\r\n              <label for=\"display_in_forms\" class=\"form-check-label\">Afficher dans le formulaire de travaux</label>\r\n            </div>\r\n            \r\n          </div>\r\n          <div class=\"row justify-content-end\">\r\n            <div class=\"col-auto\">\r\n              <button class=\"btn btn-primary\"><i class=\"bx bx-loader-alt fa-spin\" *ngIf=\"service.submitted && (service.loading$ | async)\"></i> {{service.persistence === false ? \"Ajouter\" : \"Sauvegarder\"}}</button>\r\n            </div>\r\n          </div>\r\n\r\n        </fieldset>\r\n        <!-- end col -->\r\n      </form>\r\n    </div>\r\n  </div>\r\n\r\n</div>"],"names":[],"sourceRoot":"webpack:///"}